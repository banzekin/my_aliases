################
## Main alias ##
################
alias ?='man' #haha
alias ??='info'
alias ???='whatis'
alias cls='clear'
alias show-history='history | grep -i'
alias export-history='history -a'
alias import-history='history -n'
#
#Alias edition & manupulation
alias alias-edit='mcedit ~/.my_aliases'
alias alias-edit2='gedit ~/.my_aliases'
alias alias-update='source ~/.bashrc'
#
#File(s) related commands
alias count-all-files='ls | wc -l'
alias list-all-files='ls -al --time-style=+%D | grep `date +%D`'
alias list-all-files-MB='du -sch *'
alias list-long-names='ls -lhXG'
alias finder='find -iname'
alias remove-m='sed -i "s/\r$//g"'
alias svi='sudo vi'
alias sge='sudo gedit'
alias rw-='chmod 600'
alias rwx='chmod 700'
alias r--='chmod 644'
alias r-x='chmod 755'
alias apt-get='sudo apt-get'
alias less="less -S --tabs=4"
#
#Directory alias
alias ..='cd ../'
alias ...='cd ../..'
alias doc='cd ~/Documents'
alias books='cd ~/Documents/Books'
alias down='cd ~/Downloads'
alias media='cd ~/media'
alias work='cd ~/Work'
alias vids='cd ~/Videos'
alias dbox='cd ~/Dropbox'
alias games='cd ~/Games'
alias music='cd ~/Music'
alias flux='cd ~/Work/WIFI/fluxion'
alias handshakes='~/Work/WIFI/fluxion/attacks/Handshake\ Snooper/handshakes'
alias dic='cd ~/Work/dic/'
#
#Mount alias
alias external-off='sudo umount /dev/sdb1'
alias external-on='sudo mount /dev/sdb1 /home/banzekin/media'
alias w7-on='sudo mount /dev/sda2 /mount/windows7'
alias w7-off='sudo umount /dev/sda2'
alias mount-cd='sudo mount -o loop'
alias make-iso-folder='mkisofs -o image.iso -R'
#
#Distro release
alias show-distro-version='cat /etc/lsb-release'
#
#MISC aliases
alias restart-sound-daemon='sudo alsa force-reload'
alias restart-xfce4='xfce4-session-logout'
alias videoinfo='grep -i --color Video /var/log/Xorg.0.log'
alias gpumeminfo='grep -i --color memory /var/log/Xorg.0.log'
alias CPU='prtstat $$'
alias permission='stat -c "%a %U %G %n"'
alias MD5-dir='find . -type f -exec md5sum {} \;'
alias rows-example='seq 1 31 | paste -s -d "\t\t\t\n" -'
alias rows-4='pr -T -4'
alias rows-2='pr -T -2'
alias transmission='DISPLAY=:0 exec /usr/bin/transmission-gtk &'
alias mini-term='xterm -hold -bg black -geometry 100x27-0-0 -fg "#99CCFF" -title "Mini-term" &' #xterm is needed
#
#Youtube alias (you should install youtube-dl)
alias mp4='youtube-dl -f 18 --quiet --restrict-filename --no-playlist --no-check-certificate'
alias youtube-mp4-best-quality='youtube-dl -f 22 --quiet --restrict-filename --no-playlist --no-check-certificate'
alias youtube-best-quality='youtube-dl -f bestvideo'
alias mp3='youtube-dl --extract-audio --audio-format mp3 --audio-quality 0'
#
#Google Translator (you need to download the shell translator)
alias en-es='~/Work/tools/translate/trans -brief -s en -t es'
alias es-en='~/Work/tools/translate/trans -brief -s es -t en'
alias en-se='~/Work/tools/translate/trans -brief -s en -t sw'
alias se-en='~/Work/tools/translate/trans -brief -s sw -t en'
#
#RECORD all activity in a text file
alias recterm='script ~/Work/record.txt'

######################
## Shutdown by time ##
######################
alias shut130am='sudo shutdown -P 1:30 "The server is shutting down, please save your work and log off."'
alias shut230am='sudo shutdown -P 2:30 "The server is shutting down, please save your work and log off."'
alias shut330am='sudo shutdown -P 3:30 "The server is shutting down, please save your work and log off."'

######################
## Network Commands ##
######################
#
# Connection info
alias open-ports='sudo netstat -plunt'
alias open-ports2='sudo netstat -tulanp'
alias check-connections='netstat -an | grep :80 | sort'
alias check-established-connections='sudo netstat -t -u -c | grep ESTABLISHED'
alias check-service-connections='sudo lsof | grep TCP | grep LISTEN'
#
#Routing and Ping commands
alias ping-10='ping -c 10'
alias ping-100='ping -c 100'
alias route1='traceroute www.google.com'
alias route2='mtr www.google.com'
#
#Network interfaces info, Performance and Monitoring commands
alias eth0-info='sudo ethtool eth0'
alias eth0-status='dmesg | grep -i link | grep eth0'
alias wlan0-info='sudo ethtool wlan0'
alias wlan0-status='dmesg | grep -i link | grep wlan0'
alias set-eth0-promiscuous-mode='sudo ifconfig eht0 promisc'
alias set-wlan0-promiscuous-mode='sudo ifconfig wlan0 promisc'
alias check-promiscuous-mode='dmesg | grep eth0 && dmesg | grep wlan0'
#
#Bandwidth control & info commands
alias check-bandwidth-eth0='vnstat -i eth0' #vnstat is needed
alias check-bandwidth-graph-eth0='vnstati -s -i eth0 -o ~/vnstat_eth0.png' #you should install vnstati
alias check-wlan0-bandwidth='vnstat -i wlan0'
alias check-bandwidth-graph-wlan0='vnstati -s -i wlan0 -o ~/vnstat_wlan0.png'
alias show-bandwidth='bmon' #you need to install bmon
alias show-bandwidth-speed='nload' #you should install nload
alias check-downlink-speed='wget -O /dev/null http://speedtest.wdc01.softlayer.com/downloads/test10.zip'
alias show-current-net='lshw -C network'
alias show-current-net2='iw list | less'
#
#Virtual IP's
alias set-virtual-ip-eth0='sudo ifconfig eth0 192.168.1.10 netmask 255.255.255.0 up'
alias set-virtual-ip-wlan0='sudo ifconfig wlan0 192.168.2.10 netmask 255.255.255.0 up'
#
#DNS related alias
alias flushdns='sudo /etc/init.d/dns-clean restart'
alias edit-dns='sudo /etc/resolv.conf'
alias avahi-disable='sudo systemctl disable avahi-daemon.service'
alias avahi-enable='sudo systemctl enable avahi-daemon.service'
alias avahi-stop='sudo systemctl stop avahi-daemon.service'
alias avahi-start='sudo systemctl start avahi-daemon.service'
#
#Tor & VPN commands (you should install tor and/or openvpn package first)
alias tor-start='sudo systemctl start tor.service'
alias tor-stop='sudo systemctl stop tor.service'
alias tor-restart='sudo systemctl restart tor.service'
alias tor-status='sudo systemctl status tor.service'
alias tor-browser='~/.local/share/torbrowser/tbb/x86_64/tor-browser_en-US/start-tor-browser.desktop' #tor browser is needed
alias tor-show-my-ip='torsocks lynx -noreferer https://check.torproject.org'
alias tor-lynx='torsocks lynx -noreferer http://duckduckgo.com/'
alias openvpn-start='sudo systemctl start openvpn.service'
alias openvpn-stop='sudo systemctl stop openvpn.service'
alias openvpn-status='sudo systemctl status openvpn.service'
#
#MISC networking commands
alias sync-time='sudo ntpdate pool.ntp.org'
#
alias mirror-site='wget --mirror --convert-links --adjust-extension --page-requisites --no-parent'
alias wsearch='/usr/bin/firefox http://duckduckgo.com/'
alias gfacebook='/opt/google/chrome/chrome https://www.facebook.com'
alias gtwitter='/opt/google/chrome/chrome https://www.twitter.com'
alias ffacebook='/usr/bin/firefox https://www.facebook.com'
alias ftwitter='/usr/bin/firefox https://www.twitter.com'
#
#Apache2 alias (Apache2 is needed)
alias apache2-start='sudo systemctl start apache2.service'
alias apache2-stop='sudo systemctl stop apache2.service'
alias apache2-reload='sudo systemctl reload apache2'
alias apache2-status='sudo systemctl status apache2.service'
#
#networking alias
alias restart-network-manager='sudo systemctl restart network-manager.service'
alias restart-network-icon='killall nm-applet; nohup nm-applet &'
#
#OpenSSH aliases (SSH is needed)
alias ssh-start='sudo systemctl start ssh.service'
alias ssh-stop='sudo systemctl stop ssh.service'
alias ssh-status='sudo systemctl status ssh.service'
alias ssh-reload='sudo systemctl restart ssh.service'
#
#SMB aliases (you should install Samba)
alias samba-start='sudo service smbd start && sudo service winbind start'
alias samba-stop='sudo service smbd stop && sudo service winbind stop'
alias samba-restart='sudo service smbd restart && sudo service winbind restart'
alias samba-status='sudo service smbd status && sudo service winbind status'
alias samba-current-status='sudo smbstatus'
#
#Firewalling related aliases
alias ufw_on='sudo ufw enable'
alias ufw_off='sudo ufw disable'
alias ufw_status='sudo ufw status numbered'
#
#Network information gathering
alias netbios-scan='sudo nbtscan -v -s :' #nbtscan is needed
alias network-scan='sudo netdiscover -r' #you should install netdiscover
#
#Web scan commands
alias webscan1='nikto -h' #you need to install nikto
alias webscan2='nikto -Cgidirs all -Format html -output scan.html -D V -h' #you should install nikto
alias webscan3='sudo skipfish -m 5 -L -o ~/Work/reports/website/ -b ie -B' #you should install skipfish
#get a web server header
alias header='curl -I'
#find out if remote server supports gzip
alias headerc='curl -I --compress'

############
# WIRELESS #
############
#
#Wireless Cracker
alias fluxion='cd ~/Work/fluxion' # you need fluxion - https://github.com/FluxionNetwork/fluxion/
alias linset='sudo /usr/sbin/linset' # you should install linset
alias kill-lighttpd='sudo killall lighttpd' 
#
#WIFI SCAN
alias kill-airmon='sudo airmon-ng check kill' #you should install aircrack-ng
alias wlan0-mon0='sudo airmon-ng start wlan0'
alias wlan0-stop='sudo airmon-ng stop wlan0'
alias wifiscan='sudo airodump-ng mon0' #you should install aircrack-ng
#
#Wireless bssid info
alias show-wireless-bssid='sudo linssid' #you should install linssid
#
#MAC managing commands
alias wlan0-fixed-mac='sudo ifconfig wlan0 down && sudo macchanger wlan0 --mac a8:66:7f:10:15:2e && sudo ifconfig wlan0 up && ifconfig wlan0' #you need macchanger
alias eth0-fixed-mac='sudo ifconfig eth0 down && sudo macchanger eth0 --mac a8:66:7f:10:15:2e && sudo ifconfig eth0 up && ifconfig eth0'
alias wlan0-dyn-mac='sudo ifconfig wlan0 down && sudo macchanger -r wlan0 && sudo ifconfig wlan0 up && ifconfig wlan0'
alias eth0-dyn-mac='sudo ifconfig eth0 down && sudo macchanger -r eth0 && sudo ifconfig eth0 up && ifconfig eth0'

##############################
## System Security Commands ##
##############################
alias av-scan='sudo clamscan --infected --remove --recursive /home' #you need to install clamav
alias rootkit-scan='sudo rkhunter --checkall' #you need to install rkhunter
alias rootkit-update='sudo rkhunter --propupd'
alias rootkit-check-log='sudo cat /var/log/rkhunter.log | grep -i warning'
alias check-rootkits='sudo chkrootkit | sudo tee /var/log/chkrootkit/chkrootkit.log' #you need to install chkrootkit
alias update-lynis='lynis update info' #you need to install lynis
alias audit-lynis='sudo lynis audit system'
alias show-lynis-log='sudo cat /var/log/lynis-report.dat | grep suggestion'
alias audit-tiger='sudo tiger' #you need to install tiger
alias armor='sudo apparmor_status'
alias gen-random-passwd='makepasswd --chars=32'

##############################
## Logging Related Commands ##
##############################
alias view-syslog='lnav /var/log/syslog' #lnav package is needed
alias view-syslog2='head /var/log/syslog'
alias view-auth-logs='lnav /var/log/auth.log'
alias view-firewall-logs='lnav /var/log/ufw.log'
alias view-kern-logs='lnav /var/log/kern.log'
alias clean-old-logs='sudo rm /var/log/*.gz | sudo rm /var/log/*.1 | sudo rm /var/log/*.old'
alias view-systemctl-logs='sudo journalctl -b0 --since today'
alias view-systemctl-logs-notice='sudo journalctl -b --since today -p 5'
alias view-shrink-logs='sudo journalctl --vacuum-size=10M'
alias view-logwatch='sudo logwatch | less' #you need to install logwatch
alias view-firewall-logs2='fwlogwatch -t -b -n -W' #you need to install fwlogwatch

####################
# System Commands ##
####################
#
#Maintenance commands
alias update='sudo apt-get upgrade -y && sudo apt-get dist-upgrade -y'
alias update2='sudo apt-get update && sudo apt-get upgrade -y && sudo apt-get dist-upgrade -y'
#
#Package(s) administration commands
alias show-packages='sudo apt --installed list'
alias show-package-info='apt-cache show'
alias show-installed-packages='apt list --installed'
alias show-installed-kernels='dpkg --list | grep linux-image'
alias remove-old-kernel='sudo aptitude purge'
alias purge-package='sudo apt-get --purge remove -y'
#
alias show-services-status='sudo systemctl list-unit-files'
alias show-services-timing='sudo systemd-analyze blame'
#
#Hardware and Video information
alias show-hardware='inxi -SGADIPMnN'
alias check-cpu-temperature='acpi -t'
alias show-opengl-version='glxinfo | grep OpenGL' #you need to install glxinfo
alias show-display-resolution='xrandr --query'
alias show-display_ID-connected='xrandr -q | grep " connected"'
alias show-ID-screen='xrandr --listmonitors'
#
#Memory resources related aliases
alias show-consume-mem='ps aux | sort -nrk 4 | head'
alias show-free-mem='ps aux --width 30 --sort -rss | head'
alias show-mem-info='free -m -l -t -h'
alias show-disk-info='sudo fdisk -l'
alias check-running-apps='sudo lsof -i'

#### Compress and Extract files from different formats
function tgz() {
        [ "$1" != "" ] && tar -czRf $1.tar.gz $1 && echo "$1.tar.gz created successfully!"|| echo "Usage: tgz [folder_or_file]"
}

function bz2() {
        [ "$1" != "" ] && tar -cjRf $1.tar.bz2 $1 && echo "$1.tar.bz2 created successfully!" || echo "Usage: bz2 [folder_or_file]"
}

function tar() {
        [ "$1" != "" ] && tar -xvf $1 || echo "Usage: tar [tar_file_name]"
}

function extract() {
    if [ -f $1 ] ; then
      case $1 in
        *.tar.bz2)   tar xjf $1     ;;
        *.tar.gz)    tar xzf $1     ;;
        *.bz2)       bunzip2 $1     ;;
        *.rar)       unrar e $1     ;;
        *.gz)        gunzip $1      ;;
        *.tar)       tar xf $1      ;;
        *.tbz2)      tar xjf $1     ;;
        *.tgz)       tar xzf $1     ;;
        *.zip)       unzip $1       ;;
        *.Z)         uncompress $1  ;;
        *.7z)        7z x $1        ;;
        *)     echo "'$1' cannot be extracted via extract()" ;;
         esac
     else
         echo "'$1' is not a valid file"
     fi
}

#### Advanced PS function
function ps? () {
        echo "USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND"
        ps aux | grep $1
}

#### mkdir function
function mkcd() { 
mkdir $1 cd $1
}

#### Count all file(s) from a directory
function count-files () {
find $1 -type f -exec ls -l {} \; | wc -l
}

#### history of max commands used
function hmax () {
history | awk '{print $2}' | sort | uniq -c | sort -rn | head 
}

#### Show current LAN and WAN IP
function IP_WAN () {
IP_WAN=$(wget -qO- http://ipecho.net/plain ; echo)
IP_LAN=$(/sbin/ifconfig | grep Bcast | awk '{print $2}' | cut -d":" -f 2)

if [ $IP_WAN eq ""]; then IP_WAN="Not assigned"
fi

echo ""
echo "============================================="
echo "WAN : $IP_WAN"
echo "LAN:  $IP_LAN"
echo "============================================="
echo ""
}

### Advanced UFW control
#allow connections from an IP address or subnet
function ufw_allow () {
[ "$1" != "" ] && sudo ufw allow from $1 || echo "Usage: ufw_allow [IP Address]"
}

#block or deny all packets from a IP adress or subnet
function ufw_block () {
[ "$1" != "" ] && sudo ufw deny from $1 to any || echo "Usage: ufw_block [IP Address]"
}

#block or deny all packets from a IP address to a specific port
function ufw_block_port () {
[ "$1" != "" ] && sudo ufw deny from $1 to any port $2 || echo "Usage: ufw_block_port [IP Address / Port]"
}

#using ufw to block outgoing traffic to website, ip address or subnet
function ufw_out_block () {
[ "$1" != "" ] && sudo ufw deny out from any $1 || echo "Usage: ufw_out_block [IP Address]"
}

#### DNS cache flush
function flush-dns () {
sudo /etc/init.d/dns-clean restart
sudo /etc/init.d/networking force-reload
sudo /etc/init.d/nscd restart
# If you wanted to refresh your settings you could disable and then run
sudo service network-manager restart

echo "DNS Flushed!";
}

### DNS Query lookup
function ns1 () {
nslookup -q=all $1
nslookup -q=soa $1
dig -x $1
}

#### System backup
function do_backup () {
TIMESTAMP=`date +%Y%m%d.%H%M`                                   #timestamp file is on
DEST_DIR="/home/thorfinn/Dropbox/Backup"                        #destination directory
SRC_DIR="/etc /var/log /var/spool/cron"                         #directories to backup
FNAME="sysbackup"                                               #destination file name    
LOG="/home/thorfinn/Work/$FNAME-$TIMESTAMP.log"                 #log file destination
echo -e "Starting backup of $SRC_DIR directory" >> ${LOG}
sudo tar -vczPf ${DEST_DIR}/${FNAME}-${TIMESTAMP}.tar.gz ${SRC_DIR} >> ${LOG}
echo -e "Backup done of $SRC_DIR" >> ${LOG}
}

#### list an installed package by name
showpkg () {
  apt-cache pkgnames | grep -i "$1" | sort
  return;
}

#### shows uptime using a shorter formula
myuptime () {
  uptime | awk '{ print "Uptime:", $3, $4, $5 }' | sed 's/,//g'
  return;
}

#### remove audio from video
# $1 = source file
# $2 = destination
# Example: removeaudio myvideo.webm myvideo-silent.mp4
removeaudio() {
  ffmpeg -i $1 -vcodec copy -an $2
}

### Fun command (you should install "cowsay" and "fortune"
function cow_loop () {
commands=(cow{say,think}); while [ "rainbows are delightful" ]; do (fortune | ${commands[$RANDOM % ${#commands[@]}]} -f $(cowsay -l | tail -n+2 | xargs -n 1 | sort -R | head -n 1) | lolcat -a ) && sleep 5 && clear; done
}

